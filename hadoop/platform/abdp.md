## ABDP大数据平台的建设和维护
ABDP大数据平台主要由存储计算子平台(AbdpCarrier)、数据采集子系统(AbdpShip)、数据仓库(AbdpDW)、调度子系统(AbdpScheduler)、数据服务子系统（AbdpDataService）、数据开发子平台(AbdpCockPit)组成。
### AbdpCarrier
AbdpCarrier是ABDP大数据平台的存储计算子平台，其承载着整个大数据平台的存储和计算功能。基于CDH发行版，采用Hadoop生态自建的大数据基础平台，存储引擎有HDFS、HBase、Hive、Kudu等，计算引擎有Spark、Flink、Presto等组件自建的大数据基础平台。
###	AbdpShip
AbdpShip数据采集子系统是ABDP大数据平台的原料输送器，负责完成异构数据源、多样化数据需求的一站式数据采集，其依托AbdpCockPit的配置管理、AbdpScheduler的任务调度最终将数据汇集到AbdpCarrier用于完成后续的数据加工和数据生产任务。AbdpShip基于Kafka为数据总线，按照数据源划分为MySQL数据源和非MySQL数据源，MySQL数据源采用canal监听MySQL的二进制日志推送到数据总线；非MySQL数据源一般由业务方推送数据到数据总线，采用flink流计算框架开发实时数据提取模块将数据从数据总线中取出后储到HDFS和Kudu，分别由Extractor2Hdfs和Extractor2Kudu两个Flink Job完成：Extractor2Hdfs将数据进行一定清洗后存储到HDFS用于T+1的数据加工和生产；Extractor2Kudu将数据进行一定的逻辑处理后存储到Kudu用于实时数据需求。
###	AbdpScheduler
AbdpScheduler是基于Airflow进行二次集成开发的、负责整个ABDP平台定时任务的调度和分布式执行的调度子系统，调度和管理HDFS到Hive的数据清洗和加载任务、数据仓库层级间的数据加工任务，Hive到MySQL的数据生产任务等。任务的调度执行参数在数据开发平台中进行配置和管理。
###	AbdpDataService 
AbdpDataService是ABDP大数据平台对外提供数据服务的综合应用子系统，数据服务系统依托于任务调度系统中的数据生产任务生产的数据，以API形式对外提供数据服务接口调用，对风控、资方和业务运营提供实时查询用户历史借款行为，用户APP点击事件行为查询服务，实时交易指标计算和展示等业务。
###	AbdpDW
AbdpDW是ABDP大数据平台上数据仓库一种逻辑模型实现，在数据开发平台上AbdpCockPit上进行逻辑模型的配置和管理，按照分层理论将数据主要物理存储在Hive中，根据在AbdpCockPit中配置的数据层级、策略、周期、表结构定义、SQL脚本，开发一套SparkSqlETL框架自动完成数据加工任务。
###	AbdpCockPit
AbdpCockpit是ABDP大数据平台的数据开发子平台，是数据开发任务的主要用户界面，设计的目标是简化数据接入的复杂度，降低数据接入门槛，提高数据生产效率，将大数据工程师从繁琐的取数逻辑中解放出来。主要有配置管理、任务定义和提交、数据监控、数据字典和权限管理等模块组成。数据产品经理，数据分析师、ETL工程师、数据开发工程师在各自的权限范围内配置管理和提交数据任务。AbdpCockPit由Commander服务模块和Worker作业模块组成，Commander负责接收用户的配置管理、任务提交等请求，通知消息通过Kafka发送给Worker任务模块；Worker任务监听到Kafka消息后从MySQL中读取任务配置异步完成对应的任务执行后更新任务状态。
